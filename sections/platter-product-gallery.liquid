<style>
  @import "https://cdn.jsdelivr.net/npm/tailwindcss@^2.0/dist/tailwind.min.css";
</style>

<script type="module">
  document.addEventListener('DOMContentLoaded', function() {
    const showMoreButton = document.getElementById('show-more');
    const showLessButton = document.getElementById('show-less');
    const hiddenCards = document.querySelectorAll('.product-card.hidden');

    showMoreButton.addEventListener('click', function() {
      hiddenCards.forEach(card => card.classList.remove('hidden'));
      showMoreButton.classList.add('hidden');
      showLessButton.classList.remove('hidden');
    });

    showLessButton.addEventListener('click', function() {
      hiddenCards.forEach(card => card.classList.add('hidden'));
      showLessButton.classList.add('hidden');
      showMoreButton.classList.remove('hidden');
    });
  });
</script>

<div class="container w-full max-w-none">
  <h2 class="text-2xl font-bold my-4">{{ section.settings.heading }}</h2>
  <div class="grid grid-cols-2 gap-4 md:flex md:overflow-x-auto md:gap-4 md:space-x-4">
    {% for block in section.blocks %}
    <div class="product-card bg-white shadow-lg rounded-lg max-w-sm md:w-72 flex-shrink-0 {% if forloop.index > 4 %}hidden md:block{% endif %}">
      <img src="{{ block.settings.product.featured_image | img_url: '300x300' }}" alt="{{ block.settings.product.title }}" class="w-full h-48 object-cover">
      <div class="p-4">
        <h3 class="text-lg font-medium">{{ block.settings.product.title }}</h3>
        <p class="text-gray-500">{{ block.settings.product.price | money }}</p>
        <button class="bg-blue-500 text-white px-4 py-2 mt-3 rounded">{{ block.settings.button_text }}</button>
      </div>
    </div>
    {% endfor %}
  </div>
  <button id="show-more" class="bg-gray-800 text-white px-6 py-2 rounded mt-4 md:hidden">Show More</button>
  <button id="show-less" class="bg-gray-800 text-white px-6 py-2 rounded mt-4 hidden md:hidden">Show Less</button>
</div>

{% schema %}
{
  "name": "Platter Best Sellers",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Best Sellers"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product Card",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Product"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Buy Now"
        }
      ],
      "limit": 10
    }
  ],
  "presets": [
    {
      "name": "Platter Best Sellers"
    }
  ]
}
{% endschema %}
